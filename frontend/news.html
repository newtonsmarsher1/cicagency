<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title data-translate="news-title">News - CIC</title>

  <!-- Monarch Design System -->
  <link rel="stylesheet" href="css/monarch-design-system.css">
  <script src="js/api-config.js"></script>
  <script src="js/cic-settings-manager.js"></script>
  <script src="js/cic-settings-init.js"></script>
  <style>
    :root {
      --brand-green: #00ff88;
      --brand-maroon: #8b4513;
      --brand-dark: #006633;
      --brand-accent: #32ff7e;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding-bottom: 80px;
    }

    /* Header */
    .header {
      background: var(--brand-green);
      padding: 20px;
      color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .back-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .header-title {
      flex: 1;
      font-size: 24px;
      font-weight: 700;
    }

    /* Content */
    .content {
      flex: 1;
      padding: 20px;
    }

    /* News List */
    .news-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .news-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
    }

    .news-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 16px rgba(0, 255, 136, 0.2);
    }

    .news-image {
      width: 100%;
      height: 180px;
      background: linear-gradient(135deg, var(--brand-green) 0%, var(--brand-accent) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 64px;
    }

    .news-content {
      padding: 20px;
    }

    .news-date {
      font-size: 12px;
      color: #999;
      margin-bottom: 8px;
    }

    .news-title {
      font-size: 18px;
      font-weight: 700;
      color: #333;
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .news-excerpt {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .news-tag {
      display: inline-block;
      background: #e8f5e9;
      color: var(--brand-dark);
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-right: 8px;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--brand-green);
      padding: 8px 0;
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      font-size: 11px;
      font-weight: 500;
      transition: all 0.3s;
      padding: 8px 12px;
      border-radius: 8px;
    }

    .nav-item:hover,
    .nav-item.active {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }

    .nav-icon {
      font-size: 24px;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <button class="back-btn" onclick="window.history.back()">‚Üê</button>
      <h1 class="header-title" data-translate="news-header">News & Updates</h1>
    </div>
  </div>

  <!-- Content -->
  <div class="content">
    <div class="news-list" id="news-list">
      <!-- News will be loaded here -->
      <div class="news-card">
        <div class="news-image">üì∞</div>
        <div class="news-content">
          <div class="news-date">October 11, 2025</div>
          <div class="news-title" data-translate="news-welcome-title">Welcome to CIC Platform!</div>
          <div class="news-excerpt" data-translate="news-welcome-desc">
            We're excited to have you here. Start earning by completing tasks, building your team, and growing your
            wealth through our investment plans.
          </div>
          <span class="news-tag" data-translate="news-tag-announcement">Announcement</span>
        </div>
      </div>

      <div class="news-card">
        <div class="news-image">üéâ</div>
        <div class="news-content">
          <div class="news-date">October 10, 2025</div>
          <div class="news-title" data-translate="news-investment-title">New Investment Plans Available</div>
          <div class="news-excerpt" data-translate="news-investment-desc">
            Check out our Bronze, Silver, and Gold investment plans with daily returns ranging from 1.5% to 2.5%. Start
            investing today!
          </div>
          <span class="news-tag" data-translate="news-tag-investment">Investment</span>
        </div>
      </div>

      <div class="news-card">
        <div class="news-image">üìä</div>
        <div class="news-content">
          <div class="news-date">October 9, 2025</div>
          <div class="news-title" data-translate="news-task-title">Task System Updated</div>
          <div class="news-excerpt" data-translate="news-task-desc">
            Our new quiz-based task system is now live! Answer questions correctly to earn rewards. Test your knowledge
            and grow your earnings.
          </div>
          <span class="news-tag" data-translate="news-tag-update">Update</span>
        </div>
      </div>

      <div class="news-card">
        <div class="news-image">üí∞</div>
        <div class="news-content">
          <div class="news-date">October 8, 2025</div>
          <div class="news-title" data-translate="news-rewards-title">Increased Task Rewards</div>
          <div class="news-excerpt" data-translate="news-rewards-desc">
            We've increased rewards across all levels! Level 5+ users can now earn up to KES 555 per task. Upgrade your
            level to maximize earnings.
          </div>
          <span class="news-tag" data-translate="news-tag-rewards">Rewards</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <a href="home.html" class="nav-item">
      <span class="nav-icon">üè†</span>
      <span data-translate="home">Home</span>
    </a>
    <a href="task.html" class="nav-item">
      <span class="nav-icon">üìã</span>
      <span data-translate="tasks">Tasks</span>
    </a>
    <a href="invest.html" class="nav-item">
      <span class="nav-icon">üí∞</span>
      <span data-translate="invest">Invest</span>
    </a>
    <a href="withdrawal.html" class="nav-item">
      <span class="nav-icon">üí∏</span>
      <span data-translate="withdraw">Withdraw</span>
    </a>
    <a href="profile.html" class="nav-item">
      <span class="nav-icon">üë§</span>
      <span data-translate="profile">Profile</span>
    </a>
  </div>

  <script>
    // Load news from API
    function loadNews() {
      const token = localStorage.getItem('token');
      if (!token) {
        window.location.href = 'index.html';
        return;
      }

      fetch('/api/auth/stats', {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      })
        .then(res => res.json())
        .then(data => {
          if (data.news && data.news.length > 0) {
            const list = document.getElementById('news-list');
            list.innerHTML = data.news.map(item => `
            <div class="news-card">
              <div class="news-image">${item.icon || 'üì∞'}</div>
              <div class="news-content">
                <div class="news-date">${new Date(item.date).toLocaleDateString()}</div>
                <div class="news-title">${item.title}</div>
                <div class="news-excerpt">${item.content}</div>
                <span class="news-tag">${item.category || 'News'}</span>
              </div>
            </div>
          `).join('');

            if (window.CICLanguageManager) {
              window.CICLanguageManager.applyLanguage();
            }
          }
        })
        .catch(err => console.error('Error loading news:', err));
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function () {
      loadNews();
    });
  </script>
</body>

</html>